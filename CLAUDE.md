# CLAUDE.md

## Обзор проекта

Интерактивный справочник «Жертвы в Пятикнижии Моисея» — веб-страница для изучения всех видов жертвоприношений на основании Синодального перевода Библии.

**Деплой:** https://dik-garri.github.io/Bible/

## Язык

Весь контент на русском языке. Ответы по умолчанию на русском.

## Ключевые файлы

- **index.html** — единственный файл приложения (HTML + CSS + JS, без зависимостей)
- **Жертвы_в_Пятикнижии_анализ.md** — исходный текстовый анализ всех жертв (12 разделов)
- **synodal/** — Русский Синодальный перевод в JSON (66 книг)

## Архитектура

Один HTML-файл, zero dependencies. Вся логика встроена:

- **CSS** — в `<style>` в `<head>`. Палитра: пергамент `#faf6f0`, акцент `#b8860b`, текст `#2c1810`. Шрифт: Georgia serif. Mobile-first, адаптивный grid.
- **JS** — в `<script>` перед `</body>`. Табы, раскрытие карточек, сортировка таблицы, подтягивание стихов из `synodal/*.json`.

### Навигация — 6 вкладок

1. **Основные жертвы** — 5 раскрывающихся карточек (всесожжение, хлебное, мирная, за грех, повинности)
2. **Особые жертвы** — 7 карточек (посвящение, Йом Киппур, рыжая телица, Пасха, назорей, завет, патриархи)
3. **Календарь** — 8 карточек с количеством животных по праздникам
4. **Сравнение** — сортируемая таблица
5. **Распределение** — CSS-диаграммы (Богу / священнику / приносящему)
6. **Принципы** — 8 богословских принципов

### Кликабельные ссылки на Библию

Элементы `.ref`, `.cal-ref`, `.principle-verse` кликабельны. При клике:
1. Парсится русское сокращение (Лев., Быт., Чис. и т.д.) через `BOOK_MAP`
2. Загружается `synodal/{fileId}.json` через `fetch()` (с кэшированием в `bookCache`)
3. Извлекаются нужные стихи (поддержка диапазонов `1–9`, перечислений `3, 6, 11`, точечек `;`)
4. Отображаются в модальном окне `#verseOverlay`

### Маппинг книг

`BOOK_MAP` — русское сокращение → ID файла (например `'Лев'` → `'lv'`).
`BOOK_FULL_NAME` — ID файла → полное русское название.

## Синодальный перевод (synodal/)

JSON-файлы: массив глав, каждая глава — массив строк стихов (0-indexed).

```javascript
// Левит 1:4
const data = await fetch('synodal/lv.json').then(r => r.json());
const verse = data[0][3]; // глава 1 → индекс 0, стих 4 → индекс 3
```

Основные файлы Пятикнижия: `gn.json` (Бытие), `ex.json` (Исход), `lv.json` (Левит), `nm.json` (Числа), `dt.json` (Второзаконие).

## Цветовое кодирование жертв

| Жертва | CSS-переменная | Цвет |
|--------|---------------|------|
| Всесожжение | `--ola` | `#c0392b` красный |
| Хлебное | `--minha` | `#d4a017` золотой |
| Мирная | `--shlamim` | `#27ae60` зелёный |
| За грех | `--hattat` | `#2c3e80` синий |
| Повинности | `--asham` | `#7b2d8e` фиолетовый |

## Деплой

GitHub Pages из ветки `main`. Пуш в main → автоматическое обновление сайта.

```bash
git add . && git commit -m "описание" && git push
```
